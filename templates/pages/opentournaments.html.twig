{% extends 'base.html.twig' %}

{% block title %}ClashROyaleAPI App | Open Tournaments{% endblock %}

{% block body %}
	<div class="container">
		<h1 class="text-center mb-4">Open Tournaments Clash Royale</h1>

		<table class="table table-bordered table-striped table-hover">
			<thead>
				<tr>
					<th>Name</th>
					<th>Max Players</th>
					<th>Current Players</th>
					<th>Status</th>
					<th>Create Time</th>
					<th>End Time</th>
				</tr>
			</thead>
			<tbody>
				{% for tournament in data %}

					{% if tournament.currentPlayers <= 30 %}
				        {% set nb = 'success' %}
					{% elseif tournament.currentPlayers > 30 and tournament.currentPlayers <= 45 %}
				        {% set nb = 'warning' %}
				    {% else %}
				        {% set nb = 'danger' %}
					{% endif %}

					{% if tournament.status == "inPreparation" %}
				        {% set status = 'success' %}
					{% elseif tournament.status == "inProgress" %}
				        {% set status = 'danger' %}
				    {% else %}
				        {% set status = 'secondary' %}
					{% endif %}

					{% if tournament.currentPlayers != tournament.maxPlayers %}
						<tr class="table-{{ nb }}">
							<td>{{ tournament.name }}</td>
							<td>{{ tournament.maxPlayers }}</td>
							<td class="text-{{ nb }}">{{ tournament.currentPlayers }}</td>
							<td class="text-{{ status }}">{{ tournament.status }}</td>
							<td>{{ tournament.createTime|date('H:i') }}</td>
							<td>{{ tournament.createTime|date_modify("+#{tournament.duration} seconds")|date('H:i') }}</td>
						</tr>
					{% endif %}
				{% endfor %}
			</tbody>
		</table>
	</div>
{% endblock %}
